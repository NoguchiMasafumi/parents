<html>
    <head>
        <meta name='viewport' content='width=device-width,initial-scale=1.0' />

        <style>
            html {
                touch-action: manipulation;
            }
            #app{
                width:calc(100vw - 48px);
                margin-left:24px;
            }
            .fnt_sx{font-size:36px;}
        </style>
        
    </head>
    <body>

        <div id="app" >
            {{ turn++ }} / {{qq_cnt}}

            <div v-if="!completed" style="overflow: hidden;">
                <div class="fnt_sx" style="margin-bottom:36px;height:32px">
                    {{ currentTurn.e1sample }}
                </div>
                
                <div class="fnt_sx" style="padding:16px;height:32px;width:calc(100vw - 82px);border-width:1px;border-style:solid;border-color:black;margin-bottom:48px;" @click="visibility_toggle('weak',turn)">
                    <span v-if="currentTurn.etc2==1">{{currentTurn.letter}}</span>
                </div>

            </div>
            <div v-else>
                もうない
            </div>
            <input type="button" value="prev" @click="upp1()" class="fnt_sx">
            <input type="button" value="rew" @click="rew1()" class="fnt_sx">
        </div>

        
        <script src="js/vue.min.js"></script>
        <script type="module">
            import outside from './js/english_words.js'
            var value = new Vue({
                el: '#app',
                data:{
                    exec1:0,
                    turn:0,
                    qq_cnt:0,
                    qq:[]
                },
                methods:{
                    upp1:function(){
                        this.turn++
                    },
                    rew1:function(){
                        this.turn--
                    },
                    shuffle: function(array) {
                        for (let i = array.length - 1; i > 0; i--) {
                            let r = Math.floor(Math.random() * (i + 1))
                            let tmp = array[i]
                            array[i] = array[r]
                            array[r] = tmp
                        }
                        /*array.splice(12,array.length)*/
                        return array
                    },
                    visibility_toggle: function(mode,index){
                        //console.log(this.qq[index].etc2)
                        if(this.qq[index].etc2=='' || this.qq[index].etc2==null){
                            this.qq[index].etc2=1
                        }else{
                            this.qq[index].etc2=''
                        }
                    }
                },
                computed: {
                    currentTurn: function() {
                        if(this.exec1==0){

                            //console.log(outside.questions.length)
                            this.qq = outside.questions
                            this.qq_cnt=this.qq.length
                            this.shuffle(this.qq)
                           
                            this.exec1=1

                            return this.qq[this.turn]

                        }else{
                            return this.qq[this.turn]
                        }
                    },
                    completed: function() {
                        return (this.turn==outside.questions.length);
                    }
                }
            })
        </script>
    </body>
</html>